<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.griptk.b2b.common.mapper.MenuMapper">
	<select id="listInClientRoot" parameterType="String" resultType="com.griptk.b2b.common.domain.MenuVO">
		SELECT 	
			menu_id, menu_nm, p_menu_id, menu_url, menu_auth, template_id
		FROM tb_menu
		WHERE 1=1
		AND p_menu_id = 'client_root'
		AND ( 
			menu_auth = 'A'
			OR 
			menu_auth = #{menu_auth}
		)  
		AND menu_id != 'shop_main'
		ORDER BY sort_no
	</select>
	
	<select id="listMenuByParent" parameterType="com.griptk.b2b.common.domain.MenuVO" resultType="com.griptk.b2b.common.domain.MenuVO">
		SELECT 	
			menu_id, menu_nm, p_menu_id, menu_url, menu_auth, template_id
		FROM tb_menu
		WHERE 1=1
		AND p_menu_id = #{p_menu_id}
		AND ( 
			menu_auth = 'A'
			OR 
			menu_auth = #{menu_auth}
		)
		ORDER BY sort_no
	</select>
	
	<select id="list" resultType="com.griptk.b2b.common.domain.MenuVO">
		SELECT 	
			menu_id, menu_nm, p_menu_id, menu_url, menu_auth, template_id
		FROM tb_menu WHERE 1=1	
	</select>	
	
	<select id="listWithUrl" resultType="com.griptk.b2b.common.domain.MenuVO">
		SELECT  DISTINCT menu_url, menu_nm, menu_auth, template_id 
		FROM tb_menu WHERE menu_url != ''	
	</select>
	
	<select id="listMenusByBrand" resultType="com.griptk.b2b.common.domain.MenuVO">
	<![CDATA[
		SELECT 
			brand_no AS menu_id,
			CONCAT('/main/brand?p_id=',p_brand_no,'&id=',brand_no) AS menu_url, 
			brand_nm AS menu_nm
		FROM tb_brand_type WHERE p_brand_no = #{p_brand_no}
		ORDER BY brand_no
	]]>
	</select>
	
	<select id="listMenusByCraft" resultType="com.griptk.b2b.common.domain.MenuVO">
	<![CDATA[
		SELECT 
			category_no AS menu_id,
			CONCAT('/main/craft?p_id=',craft_no,'&id=',category_no) AS menu_url, 
			category_nm AS menu_nm
		FROM tb_product_category WHERE craft_no = #{craft_no}
		ORDER BY craft_no
	]]>
	</select>
</mapper>